/*! asa-swim-time-converter 2017-07-28 */

function getTime(e,o,r,n){return new Promise(function(s,a){console.debug("converting "+e+" @ "+n+" from "+o+" to "+r);var t={},l={},c=0;strokes[e]?l=strokes[e]:a("ERR: Unrecognised Stroke"),n.match(/[0-9,:,.]/i)||a("ERR: Not a Valid Time 1"),(n.match(/:/g)||[]).length>1&&a("ERR: Not a Valid Time 2"),(n.match(/\./g)||[]).length>1&&a("ERR: Not a Valid Time 3");try{if(n.indexOf(":")>0){var i=n.split(":");c=60*parseFloat(i[0])+parseFloat(i[1])}else c=parseFloat(n)}catch(e){a("ERR: Incorrect Time Conversion Error: "+e)}pools[o]?t=pools[o]:a("ERR: Unrecognised Pool Length : From"),pools[r]||a("ERR: Unrecognised Pool Length : To");try{var u=t.poolMeasureCase;console.debug(" - PoolMeasure     :",u);var g=t.numTurnPerHundred;console.debug(" - NumTurnPH       :",g);var d=l.distance;console.debug(" - Distance        :",d);var m=d;console.debug(" - timingInSeconds :",c),1500===d&&3===t.poolMeasureCase&&(m=1650),console.debug(" - D1             :",m);var b=d/100*(m/100)*(g-1);console.debug(" - NumbTurnFactor :",b);var R=l.TurnFactor;console.debug(" - TurnFactor     :",R);var T=0;T="50m"!=o?(c+Math.sqrt(c*c+4*u*R*b))/(2*u):c,console.debug(" - T50            :",T);var p=0,v=R/T;console.debug(" - TurnVal        :",v),p="50m"!=r?1*T-2*v:T,console.debug(" - Result Time    :",p),s(p.toFixed(numPlaces).toString())}catch(e){a("ERR: Conversion Error: "+e)}})}var strokes=require("./conversionTables/strokeTable"),pools=require("./conversionTables/poolTable"),timeFormatRegex=new RegExp("^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$"),numPlaces=1,isDebugMode=!1;console.debug=function(){if(isDebugMode){var e=Array.prototype.slice.call(arguments);console.log.apply(this,e)}},module.exports=getTime;
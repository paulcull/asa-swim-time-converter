/*! asa-swim-time-converter 2017 - 08 - 01  */

!function(){"use strict";var e=require("./conversionTables/strokeTable"),o=require("./conversionTables/poolTable"),r=1;console.debug=function(){},module.exports=function(n,a,t,s){return new Promise(function(c,l){console.debug("converting "+n+" @ "+s+" from "+a+" to "+t);var u={},i={},d=0;e[n]?i=e[n]:l("ERR: Unrecognised Stroke"),s.match(/[0-9,:,.]/i)||l("ERR: Not a Valid Time 1"),(s.match(/:/g)||[]).length>1&&l("ERR: Not a Valid Time 2"),(s.match(/\./g)||[]).length>1&&l("ERR: Not a Valid Time 3");try{if(s.indexOf(":")>0){var g=s.split(":");d=60*parseFloat(g[0])+parseFloat(g[1])}else d=parseFloat(s)}catch(e){l("ERR: Incorrect Time Conversion Error: "+e)}o[a]?u=o[a]:l("ERR: Unrecognised Pool Length : From"),o[t]||l("ERR: Unrecognised Pool Length : To");try{var m=u.poolMeasureCase;console.debug(" - PoolMeasure     :",m);var b=u.numTurnPerHundred;console.debug(" - NumTurnPH       :",b);var R=i.distance;console.debug(" - Distance        :",R);var T=R;console.debug(" - timingInSeconds :",d),1500===R&&3===u.poolMeasureCase&&(T=1650),console.debug(" - D1             :",T);var v=R/100*(T/100)*(b-1);console.debug(" - NumbTurnFactor :",v);var h=i.TurnFactor;console.debug(" - TurnFactor     :",h);var E=0;E="50m"!==a?(d+Math.sqrt(d*d+4*m*h*v))/(2*m):d,console.debug(" - T50            :",E);var p=0,F=h/E;console.debug(" - TurnVal        :",F),p="50m"!==t?1*E-2*F:E,console.debug(" - Result Time    :",p),c(p.toFixed(r).toString())}catch(e){l("ERR: Conversion Error: "+e)}})}}();
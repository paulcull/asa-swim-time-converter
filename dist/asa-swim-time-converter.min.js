/*! asa-swim-time-converter 2017-07-28 */

function getTime(e,o,r,n){return new Promise(function(s,t){console.debug("converting "+e+" @ "+n+" from "+o+" to "+r);var a={},l={},i=0;strokes[e]?l=strokes[e]:t("ERR: Unrecognised Stroke"),n.match(/[0-9,:,.]/i)||t("ERR: Not a Valid Time 1"),(n.match(/:/g)||[]).length>1&&t("ERR: Not a Valid Time 2"),(n.match(/\./g)||[]).length>1&&t("ERR: Not a Valid Time 3");try{if(n.indexOf(":")>0){var c=n.split(":");i=60*parseFloat(c[0])+parseFloat(c[1])}else i=parseFloat(n)}catch(e){t("ERR: Incorrect Time Conversion Error: "+e)}pools[o]?a=pools[o]:t("ERR: Unrecognised Pool Length : From"),pools[r]||t("ERR: Unrecognised Pool Length : To");try{var u=a.poolMeasureCase;console.debug(" - PoolMeasure     :",u);var g=a.numTurnPerHundred;console.debug(" - NumTurnPH       :",g);var d=l.distance;console.debug(" - Distance        :",d);var m=d;console.debug(" - timingInSeconds :",i),1500===d&&3===a.poolMeasureCase&&(m=1650),console.debug(" - D1             :",m);var T=d/100*(m/100)*(g-1);console.debug(" - NumbTurnFactor :",T);var b=l.TurnFactor;console.debug(" - TurnFactor     :",b);var R=0;R="50m"!=o?(i+Math.sqrt(i*i+4*u*b*T))/(2*u):i,console.debug(" - T50            :",R);var p=0,v=b/R;console.debug(" - TurnVal        :",v),p="50m"!=r?1*R-2*v:R,console.debug(" - Result Time    :",p),s(p.toFixed(numPlaces).toString())}catch(e){t("ERR: Conversion Error: "+e)}})}(getTime=require("./index.js"))("50 Free","25m","50m","31.0").then(function(e){console.log(e)});var strokes=require("./conversionTables/strokeTable"),pools=require("./conversionTables/poolTable"),timeFormatRegex=new RegExp("^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$"),numPlaces=1,isDebugMode=!1;console.debug=function(){if(isDebugMode){var e=Array.prototype.slice.call(arguments);console.log.apply(this,e)}},module.exports=getTime;